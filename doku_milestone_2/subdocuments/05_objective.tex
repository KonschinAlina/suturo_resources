\documentclass[main.tex]{subfiles}
\begin{document}
	
	\chapter{Objective}
	\chapterauthor{Marc Stelter}
	\section{Clean Up}
	A certain amount of objects have been misplaced in the dark realm of errors and frustration, also known as the lab. Our brave soulless, mechanic slave has now been tasked by his lazy master of little skill to retrieve these objects to gain the power and blessing of the infamous and almighty SUTURO.
	
	\subsection{Find obstacles}
	Navigation looks for obstacles on the ground, that are not defined in the map.
	
	\subsubsection{Premise}
	\begin{itemize}
		\item The map is published
		\item The laser scanner is publishing data
		\item There exists an up to date transform from the map to the laser scanner
	\end{itemize} 
	
	\subsubsection{Procedure}
	\begin{itemize}			
		\item The scans get bundled and projected on the map. Overlaying clusters get removed
	\end{itemize}
	
	\subsubsection{Completion}
	\begin{itemize}
		\item A PoseArray containing the Poses (centroid of each cluster) is published		
	\end{itemize}
	
	\subsection{Move to point of interest}
	Planning determines a point of interest and drives the HSR to it.
	
	\subsubsection{Premise}
		\begin{itemize}
			\item The obstacle\_finder publishes a PoseArray of possible points of interest
			\item Position of tables and shelfs 
		\end{itemize} 
		
	\subsubsection{Procedure}
		\begin{itemize}			
			\item Planning determines the next point of interest based on the euclidean distance
			\item Planning sends a goal to Navigation. 				
		\end{itemize}
	
	\subsubsection{Completion}
		\begin{itemize}
			\item The HSR reached the point of interest		
		\end{itemize}
		
	\subsection{Take pose}
	Brings the HSR in a pose which enables it to perceive a certain scene.
	
	\subsubsection{Premise}
	\begin{itemize}
		\item The HSR stands at the correct position with the correct orientation
		\item The HSR has enough space to take the pose  
	\end{itemize} 
	
	\subsubsection{Procedure}
	\begin{itemize}			
		\item Planning determines the pose the HSR should take
		\item Planning sends a goal to Manipulation with the pose.
		\item Manipulation sets the joints for the pose and calls Giskard to apply them. 				
	\end{itemize}
	
	\subsubsection{Completion}
	\begin{itemize}
		\item The HSR is in the correct pose
		\item Planning has received an result from Manipulation indicating success or failure		
	\end{itemize}
	
	\subsection{Perceive scene} 
	
	\subsubsection{Premise}
	\begin{itemize}
		\item The HSR looks at the scene (correct position, orientation and pose)
		\item The HSR publishes a depth and camera image
		\item The definition of regions is loaded 
	\end{itemize} 
	
	\subsubsection{Procedure}
	\begin{itemize}			
		\item Planning sends an action to Perception indicating which region to perceive
		\item Perception applies the given region filter
		\item Perception extracts found objects
		\item Perception classifies the objects	
		\item Planning filters out objects with low confidence and forwards the others to Knowledge
		\item Knowlegde adds the objects to the Knowledge-base and publishes a new object-state			
	\end{itemize}
	
	\subsubsection{Completion}
	\begin{itemize}
		\item The found objects are in the Knowledge-base
		\item The found objects can be seen in Planning and Manipulations representations of the world 		
	\end{itemize}
	
	\subsection{Grasp object}
	
	\subsubsection{Premise}
	\begin{itemize}
		\item It exist at least one object in the Knowledge-base, that is not at its goal position
		\item The world and object are present in Giskards world
		\item The gripper is free
		\item The object can be grasped 
	\end{itemize} 
	
	\subsubsection{Procedure}
	\begin{itemize}			
		\item Planning asks Knowledge for the next object
		\item Knowledge determines the next object and returns it
		\item Planning sends a command to Navigation moving the HSR to the correct pose
		\item Planning determines how to grasp the object and sends a corresponding command to Manipulation
		\item Manipulation moves the gripper to grasp the object
		\item Manipulations moves the closed gripper with the object in a neutral pose
		\item Manipulation checks if an object is in the gripper 				
	\end{itemize}
	
	\subsubsection{Completion}
	\begin{itemize}
		\item Planning receives a result from Manipulation indication success or failure
		\item The object is in the closed gripper	
	\end{itemize}
	
	\subsection{Place object}
	
	\subsubsection{Premise}
	\begin{itemize}
		\item The HSR holds an object in his gripper
		\item The world and object are present in the giskard world
	\end{itemize} 
	
	\subsubsection{Procedure}
	\begin{itemize}			
		\item Planning asks Knowledge for the goal pose of the grasped object
		\item Knowledge determines a goal pose for the object
		\item Planning sends a command to navigation moving the HSR to the correct pose
		\item Planning sends an action to Manipulation indicating the pose and method for placing the object
		\item Manipulation moves the gripper to the target pose, opens it and goes in a neutral pose 				
	\end{itemize}
	
	\subsubsection{Completion}
	\begin{itemize}
		\item The HSR is in neutral pose
		\item Planning received a result indicating success or failure from Manipulation				
	\end{itemize}
	
	\section{Storing Groceries}
	On another day in the lab the masters have returned with new loot pillaged from the local Aldi. Going by the usual lazy attitude they just dropped it on a table and tasked the poor HSR to sort them into the shelf. 
	
	\subsection{Perceiving the shelf}
	
	\subsubsection{Premise}
	\begin{itemize}
		\item The area in front of the shelf is empty 
		\item The path to the shelf is not blocked
	\end{itemize} 
	
	\subsubsection{Procedure}
	\begin{itemize}			
		\item Planning sends a command to navigation moving the HSR to the correct position
		\item Manipulation brings the HSR in the correct pose
		\item Perception takes an image of the scene
		\item Perception extracts objects from the scene
		\item Perception classifies the objects	
		\item Planning filters objects with low confidence
		\item Knowledge remembers the found objects
		\item Manipulation brings the HSR in the neutral pose	 				
	\end{itemize}
	
	\subsubsection{Completion}
	\begin{itemize}
		\item The HSR is in neutral pose
		\item The objects are present in the worlds for Manipulation and planning
		\item the objects are stored by Knowledge				
	\end{itemize}
	
	\subsection{Perceiving the table}
	
	\subsubsection{Premise}
	\begin{itemize}
		\item The area in front of the table is empty 
		\item The path to the table is not blocked
	\end{itemize} 
	
	\subsubsection{Procedure}
	\begin{itemize}			
		\item Planning sends a command to navigation moving the HSR to the correct position
		\item Manipulation brings the HSR in the correct pose
		\item Perception takes an image of the scene
		\item Perception extracts objects from the scene
		\item Perception classifies the objects	
		\item Planning filters objects with low confidence
		\item Knowledge remembers the found objects
		\item Manipulation brings the HSR in the neutral pose	 				
	\end{itemize}
	
	\subsubsection{Completion}
	\begin{itemize}
		\item The HSR is in neutral pose
		\item The objects are present in the worlds for Manipulation and planning
		\item the objects are stored by Knowledge				
	\end{itemize}
			
	\subsection{Grasp object}
	
	\subsubsection{Premise}
	\begin{itemize}
		\item It exists at least one object in the Knowledge-base, that is not at its goal position
		\item The world and object are present in giskards world
		\item The gripper is free
		\item The object can be grasped 
	\end{itemize} 
	
	\subsubsection{Procedure}
	\begin{itemize}			
		\item Planning asks Knowledge for the next object
		\item Knowledge determines the next object and returns it
		\item Planning sends a command to navigation moving the HSR to the correct pose
		\item Planning determines how to grasp the object and sends a corresponding command to Manipulation
		\item Manipulation moves the gripper to grasp the object
		\item Manipulations moves the closed gripper with the object in a neutral pose
		\item Manipulation checks if an object is in the gripper 				
	\end{itemize}
	
	\subsubsection{Completion}
	\begin{itemize}
		\item Planning receives a result from Manipulation indicating success or failure
		\item The object is in the closed gripper	
	\end{itemize}
	
	\subsection{Place object}
	
	\subsubsection{Premise}
	\begin{itemize}
		\item The HSR holds an object in his gripper
		\item The world and object are present in the giskard world
	\end{itemize} 
	
	\subsubsection{Procedure}
	\begin{itemize}			
		\item Planning asks Knowledge for the goal pose of the grasped object
		\item Knowledge determines a goal pose for the object
		\item Planning sends a command to navigation moving the HSR to the correct pose
		\item Planning sends an action to Manipulation indicating the pose and method for placing the object
		\item Manipulation moves the gripper to the target pose, opens it and goes in a neutral pose 				
	\end{itemize}
	
	\subsubsection{Completion}
	\begin{itemize}
		\item The HSR is in neutral pose
		\item Planning received a result indicating success or failure from Manipulation				
	\end{itemize}
	
\end{document}

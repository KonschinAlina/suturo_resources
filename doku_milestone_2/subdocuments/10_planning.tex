\documentclass[main.tex]{subfiles}
\begin{document}
	
	\chapter{Planning}
		\chapterauthor{Torge Olliges, Tom-Eric Lehmkuhl}
                The Planning team consisting of Torge Olliges (Groupleader), Philipp Klein (Cleanup), Tom-Eric Lehmkuhl (Grocery) and Jan Schimpf (Cleanup). It was basically responsible for the integration and connection of the results of the other groups. To achieve this task the planning group orientated itself along the lines of the legacy code of our predecessors and came up with the general architecture of the project. The planning group was also mainly in charge of testing on the HSR. At the beginning of this Milestone we created diagramms which model how we want our robot to behave depending on the Task (Cleanup/Grocery). During the time that we worked on milestone 2 we communicated our progress and current tasks in the group so that everybody knew what the other group members are doing and how we were progressing. In the following sections (one for each package or abstraction layer) we will explain the concrete tasks and provide results of our work.
                \section{Low Level Interfaces (LLIF)}
                \subsection{Manipulation}
                \subsubsection{New}
                \subsubsection{Modified}
The /textbf {Grasp-action-client} and textbf {Place-action-client} were updated with an additional argument  grasp pose which specifics from which direction the object is grasped.
The /textbf {percieve-action-client} renamed to /textbf {take-pose-action-client} to prevent further confusion between it and the perception client.
The /textbf {take-pose-action-client} was reworked and now either takes a Int for a set pose or it gets the value 0 to and then ten more Int's to move the Hsr into a pose.
                \subsubsection{Unchanged}
                \subsection{Navigation}
                \subsubsection{New}
                \subsubsection{Modified}
                \subsubsection{Unchanged}
                \subsection{Knowledge}
                \subsubsection{New}
                \begin{itemize}
 				          \item knowlegde-inserter is an interface to knowledge, which can insert the objects recognized by perception into the knowledgebase
				        \end{itemize}
				          \textbf{knowledge-client} \\
				          The knowledge-client is an interface to knowledge, which is responsible for the request to the knowledgebase. For every request exists a function, which calls the prolog-query and returns the result. Implemented requests are:
				          \begin{itemize}
				             \item \textit{prolog-table-objects} returns all objects on the table
				             \item \textit{prolog-object-goal} returns the goal shelf for an object
				             \item \textit{prolog-object-goal-pose} returns the goal pose for an object
				             \item \textit{prolog-all-objects-in-shelf} returns all objects in the shelf
				             \item \textit{prolog-next-object} returns the next object to grasp choosen by knowledge
				             \item \textit{prolog-object-dimensions} returns the dimension for an object (depth, width, height)
				             \item \textit{prolog-object-pose} returns the pose of an object as list
				             \item \textit{prolog-table-pose} returns the pose of the table as list (x, y, z)
				             \item \textit{prolog-shelf-pose} returns the pose of the shelf as list (x, y, z)
				             \item \textit{prolog-object-in-gripper} returns the dimension of the object in gripper as list (depth, width, height)
				           \end{itemize} 
				            The functions \textit{knowledge-set-table-source} and \textit{knowledge-set-ground-source} are for setting the sources for selecting the next object. The task "Storing Groceries" needs the table as source and "Clean-up" needs also the ground as source. 
				        
                \subsubsection{Modified}
                \subsubsection{Unchanged}
                \subsection{Perception}
                \subsubsection{New}
                \subsubsection{Modified}
                \subsubsection{Unchanged}
                \subsection{NLP}
                \subsubsection{New}
                \subsubsection{Modified}
                \subsubsection{Unchanged}

                
                \section{Common Functions (COMF)}
                The common functions package consists of functions which are common to both tasks. We created a functions file corresponding to the groups which they are interacting with and providing functionality to.
                \subsection{Designators}
                For this milestone we added designators to use in our high level plans.
                \subsubsection{New} 
                The designators /textit {grasping} and /textit {placing} are wrappers for /textit {call-grasp-action} and /textit {call-place-action} and both get 12 arguments the x,y,z coordiants of the object, the x,y,z,w quaternion values, the x,y,z dimensions of the object, the object-id and the grasp-pose. 

                \subsubsection{Modified}
                \subsubsection{Unchanged}
                
                \subsection{Manipulation}
                \subsubsection{New}
                Manipulation Functions:
                grasp-object
                place-object
                place-object-list
                create-place-list
                grasp-hsr
                place-hsr
                move-grasp
                \subsubsection{Modified}
                \subsubsection{Unchanged}
                
                \subsection{Navigation}
                \subsubsection{New}
                \subsubsection{Modified}
                \subsubsection{Unchanged}
                
                \subsection{Knowledge}
                \subsubsection{New}
                \subsubsection{Modified}
                \subsubsection{Unchanged}Knowledge Functions:
                
                \subsection{Perception}
                \subsubsection{New}
                \subsubsection{Modified}
                \subsubsection{Unchanged}Perception Functions:
                
                \subsection{NLP}
                \subsubsection{New}
                \subsubsection{Modified}
                \subsubsection{Unchanged}NLP functions:
                
                \section{Grocery Storing (GROCERY)}
                This package depends on common functions and low level interfacing and contains the execute file for the grocery task. Furthermore it contains a init file for the task. This connects our action clients out of the LLIF package to the action servers of the other groups and starts the master node for planning (planning\_node). The grocery\_bw file provides functions for the interaction with the bullet world.   
                \section{Cleanup (CLEAN)}
                Equal to GROCERY just different inits and execute files.
                \section{Bullet World}
                The bulletworld is a new feature which we implemented for this milestone. It is a representation of the real world which lets us check for visibilty or reachability without having to use the real robot. We added a function to spawn primitiv objects in the bullet world which were detected by the perception part to have a representation of the current world state. We decided not to test grasping with the bullet world becasue we can't use giskard in our bullet world, this would minder our capabilities. 
                
\end{document}

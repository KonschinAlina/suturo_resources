\documentclass[main.tex]{subfiles}
\begin{document}
	\section{Run}
	\subsection{Simulation}
	To start the simulation source the workspace where you installed Manipulation.
	\subsubsection{Groceries}
	Now run:\\
	\begin{lstlisting}
roslaunch suturo_manipulation_launch hsrb_megaweb2015_world.\ launch
\end{lstlisting}

	\subsubsection{Cleanup}
	Now run:\\
	\begin{lstlisting}
roslaunch suturo_manipulation_launch cleanup.launch
\end{lstlisting}

	\subsection{Knowledge}
	\subsubsection{Knowledge}
	To start Knowledge you need to run the following command.\\
	\begin{lstlisting}
roslaunch knowledge knowledge.launch
\end{lstlisting}
If you want to manually interact with the Knowledge base you can run \\
\begin{lstlisting}
rosrun rosprolog rosprolog_commandline.py
\end{lstlisting}
to start a SWI-Prolog interface.
	
	\subsubsection{NLP}
	
	To start the hard commands recognition run the following.\\
	
	\begin{lstlisting}
roslaunch suturo_spechparser hard_commands_only.launch
\end{lstlisting}
	
	\subsection{Perception}

	To start Perception you first need to start the pipelines:\\
	\begin{lstlisting}
roscd rs_perception
roslaunch rs_perception hsrb_perception.launch
\end{lstlisting}	

If you want to start Perception without the rest you can start the action client like this:\\
\begin{lstlisting}
rosrun actionserver ExtractObjectInfoClient set_region:=REGIONNAME
\end{lstlisting}

To limit the perception of objects to a specific region you can use:\\
\begin{itemize}
\item \begin{verbatim} set_region:=region name \end{verbatim} 
\end{itemize}
Region names:\\
\begin{itemize}
\item \begin{verbatim} bed_table- table_clone \end{verbatim} 
\item \begin{verbatim} table \end{verbatim} 
\item \begin{verbatim} hcr_shefl_2_0 \end{verbatim} 
\item \begin{verbatim} hcr_shefl_2_1 \end{verbatim}
\item \begin{verbatim} hcr_shefl_2_2 \end{verbatim}
\item \begin{verbatim} bookshelf_clone_0_0 \end{verbatim} 
\item \begin{verbatim} bookshelf_clone_0_1 \end{verbatim} 
\item \begin{verbatim} bookshelf_clone_0_2 \end{verbatim} 
\item \begin{verbatim} bookshelf_0 \end{verbatim} 
\item \begin{verbatim} bookshelf_1 \end{verbatim} 
\item \begin{verbatim} bookshelf_2 \end{verbatim} 
\item \begin{verbatim} robocup_default \end{verbatim} 
\end{itemize}

If any changes are made to the regions run:\\
\begin{lstlisting}
rosrun object_state simulation_region_filter_setup.py
\end{lstlisting}
If any new regions are added, create a new entry in simulation\_region\_filter\_setup.py and then run:\\
\begin{lstlisting}
rosrun object_state simulation_region_filter_setup.py
\end{lstlisting}
In addition add the new region name to hsrb\_1ms.yaml under the SuturoRegionFilter tag.\\
With both approaches a new semantic\_map.yaml will be created. Add it to the config folder.

The result topics are the following.\\
\begin{itemize}
\item \begin{verbatim}
perception_actionserver/result
\end{verbatim}
\item \begin{verbatim}
perception_actionserver_plane/result
\end{verbatim}
\end{itemize}

	
	\subsection{Manipulation}
	\subsubsection{Manipulation}
	To start the four Manipulation servers run the following command:\\
	\begin{lstlisting}
roslaunch suturo_manipulation_launch start_manipulation_server\s.launch
\end{lstlisting}
	If the start succeded every server will return a message that it successfully started in the terminal.	
	
	\subsubsection{Navigation}
	Run the following comman start navigation:\\
	\begin{lstlisting}
roslaunch suturo_navigation_launch start_suturo_navigation.\launch
\end{lstlisting}
	
	\subsection{Planning}
	Before you start Planning the simulation environment, Knowledge, Perception and Manipulation must be launched.\\
	The first step to launching Planning is the following command.\\
	\begin{lstlisting}
roslisp_repl
\end{lstlisting}

	\subsubsection{Groceries}
	To start the grocery plan you now need to load the package\\ \begin{verbatim}
	grocery_demo
	\end{verbatim}
	 using the following commands:
	\begin{lstlisting}
(swank:operate-on-system-for-emacs "grocery-demo" (quote load-op))
(grocery::init-interfaces)
\end{lstlisting}
This step takes some time. After that the task can be started:\\
\begin{lstlisting}
(grocery::execute-grocery)
\end{lstlisting}

	\subsubsection{Cleanup}
	To start the cleanup plan you now need to load the package\\ \begin{verbatim}
	cleanup_demo
	\end{verbatim}
	 using the following commands:\\
	\begin{lstlisting}
(swank:operate-on-system-for-emacs "cleanup-demo" (quote load-op))
(clean::init-interfaces)
\end{lstlisting}
This step takes some time. After that the task can be started:\\
\begin{lstlisting}
(clean::execute-cleanup)
\end{lstlisting}

\end{document}

\documentclass[main.tex]{subfiles}


\begin{document}
 \section{Perception}
 \subsection{Main perception packages}
 Create a new workspace or open the workspace where you want to install the perception part. If you are using the same workspaces we do, use the suturo\_ws workspace. Now run the following commands to download dependencies into your workspace.
 
 \begin{lstlisting}
cd src
git clone %*\url{https://github.com/SUTURO/suturo_perception.git}*)
git clone %*\url{https://github.com/SUTURO/suturo_resources.git}*) 
git clone %*\url{https://github.com/evankapi/rs_hsrb_perception.git}*) -\b suturo20
git clone %*\url{https://github.com/RoboSherlock/robosherlock.git}*) --\recursive
git clone %*\url{https://github.com/RoboSherlock/rs_resources.git}*)
git clone %*\url{https://github.com/Jastock/rs_addons.git}*)
rosdep install --from-path . --ignore-src -r 
cd ..
catkin build
\end{lstlisting}
 
 Then install the rs\_addons dependencies by running the following commands.
 \begin{lstlisting}
sudo add-apt-repository ppa:robosherlock/ppa
sudo apt-get update
sudo apt-get install rapidjson 
\end{lstlisting}
 
\subsection{Caffe}
To install Caffe, use the following commands.
 \begin{lstlisting}
sudo apt-get update
sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-\dev libopencv-dev libhdf5-serial-dev protobuf-compiler
sudo apt-get install --no-install-recommends libboost-all-dev
sudo apt-get install libgflags-dev
sudo apt-get install libgoogle-glog-dev
sudo apt-get install libopenblas-dev
sudo apt-get install liblmdb-dev
cd 
git clone %*\url{https://github.com/BVLC/caffe.git}*)
\end{lstlisting}
 
 For GPU acceleration install CUDA, a graphics card driver update may be necessary for this to work.
 
 Installation with CMake:\\
 
 Change into your caffe directory and open up the CMakeLists.txt in your editor. After the comment labeled "Options" you can set options for your build. If you installed CUDA and want GPU acceleration set CPU\_ONLY to OFF, otherwise set it to on ON.
 
 Now enter your cmake directory and open up the Dependencies.cmake file. Go to the comment labeled "BLAS" and in the line under 
 
 \begin{lstlisting}
 if(NOT APPLE)
\end{lstlisting}
 
 change it to 
 
 \begin{lstlisting}
 set(BLAS "Open" CACHE STRING "Selected BLAS library")
\end{lstlisting}
 
 Exit the file and from your cmake directory run the following commands:
 \begin{lstlisting}
 cmake ..
 make all
 make install
 make runtest
\end{lstlisting}
 You should now have a functioning caffe installation.

\newpage
 
 
 
 
Installation with make:

The installation with cmake is highly recommended, but if this should not work, the following is the alternative.

 Make following changes to the Caffe directory : \\

Copy the Makefile.config.example with 
\begin{lstlisting}
cp Makefile.config.example Makefile.config
\end{lstlisting}
Make the following changes on the Makefile.config :\\

If CUDA is not installed uncomment CPU\_ONLY := 1 to enable building for CPU only.\\
Change "BLAS := atlas" to "BLAS := open"\\
If any hdf5 related erros appear in the next step, add 
\begin{lstlisting}
/usr/lib/x86\_64-linux-gnu/hdf5/serial
\end{lstlisting}
 to LIBRARY\_DIRS and
\begin{lstlisting} 
  /usr/include/hdf5/serial/ 
\end{lstlisting} 
  to INCLUDE\_DIRS.\\
Now save and exit.

 	
Now you need to build caffe using the following commands.
\begin{lstlisting}
make all
make test
make runtest  
\end{lstlisting}

 
\end{document}
